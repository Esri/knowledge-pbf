<project xmlns="http://maven.apache.org/POM/4.0.0"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

	<modelVersion>4.0.0</modelVersion>
	<groupId>com.esri.arcgis.protobuf</groupId>
	<artifactId>arcgis-pbf</artifactId>
	<version>10.9.1.0-SNAPSHOT</version>
	<packaging>jar</packaging>

	<name>ArcGIS Java Protocol buffer stub</name>
	<url>https://devtopia.esri.com/WebGIS/arcgis-pbf</url>
	<description>This project contains stub/proxy classes generated by protocol buffer compiler from proto files residing in https://devtopia.esri.com/WebGIS/arcgis-pbf</description>

	<organization>
		<name>ESRI</name>
		<url>https://www.esri.com</url>
	</organization>
	<licenses>
		<license>
			<name>Copyright (c) Esri, 2019</name>
			<distribution>repo</distribution>
		</license>
	</licenses>
	<scm>
		<url>https://devtopia.esri.com/WebGIS/arcgis-pbf.git</url>
		<connection>scm:git:git@devtopia.esri.com/WebGIS/arcgis-pbf.git</connection>
		<developerConnection>scm:git:git@devtopia.esri.com/WebGIS/arcgis-pbf.git</developerConnection>
		<tag>HEAD</tag>
	</scm>

	<distributionManagement>
		<repository>
			<id>olympus-ags-repo</id>
			<name>olympus-ags-repo</name>
			<url>https://olympus.esri.com/artifactory/ags-repo</url>
		</repository>
	</distributionManagement>

	<properties>
		<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
		<obfuscation.outputDirectory>${project.build.directory}/obfuscated_classes</obfuscation.outputDirectory>
		<jpe.sdk.version>${project.version}</jpe.sdk.version>

		<java.source.version>6</java.source.version>
		<java.target.version>6</java.target.version>

		<compiler.plugin.version>2.3.1</compiler.plugin.version>
		<source.plugin.version>2.2.1</source.plugin.version>
		<javadoc.plugin.version>3.0.1</javadoc.plugin.version>
		<antrun.plugin.version>1.7</antrun.plugin.version>
		<resources.plugin.version>3.0.2</resources.plugin.version>

		<replacer.plugin.version>1.4.1</replacer.plugin.version>
		<exec.plugin.version>1.2.1</exec.plugin.version>
		<jar.plugin.version>3.0.0</jar.plugin.version>
	</properties>

	<dependencies>
		<!-- The following dependencies are required -->
		<dependency>
			<groupId>com.google.protobuf</groupId>
			<artifactId>protobuf-java</artifactId>
			<version>3.13.0</version>
			<optional>false</optional>
		</dependency>
		<!-- <dependency> <groupId>com.google.protobuf</groupId> <artifactId>protobuf-lite</artifactId> 
			<version>3.0.1</version> <scope>system</scope> <systemPath>C:\Users\abhi8863\.m2\repository\com\google\protobuf\protobuf-lite\3.0.1\protobuf-lite-3.0.1.jar</systemPath> 
			</dependency> -->
		<dependency>
			<groupId>zelix</groupId>
			<artifactId>ZKM</artifactId>
			<version>11.0.1a</version>
			<optional>true</optional>
		</dependency>
	</dependencies>

	<repositories>
		<repository>
			<id>olympus-ags-repo</id>
			<name>olympus-ags-repo</name>
			<url>https://olympus.esri.com/artifactory/ags-repo</url>
			<layout>default</layout>
			<releases>
				<enabled>true</enabled>
			</releases>
			<snapshots>
				<enabled>true</enabled>
			</snapshots>
		</repository>
		<repository>
			<id>olympus-real-time</id>
			<name>olympus-real-time</name>
			<url>https://olympus.esri.com/artifactory/real-time</url>
			<layout>default</layout>
			<releases>
				<enabled>true</enabled>
				<updatePolicy>always</updatePolicy>
				<checksumPolicy>warn</checksumPolicy>
			</releases>
			<snapshots>
				<enabled>true</enabled>
				<updatePolicy>always</updatePolicy>
				<checksumPolicy>ignore</checksumPolicy>
			</snapshots>
		</repository>
	</repositories>

	<pluginRepositories>
		<pluginRepository>
			<snapshots>
				<enabled>false</enabled>
			</snapshots>
			<id>release</id>
			<name>plugins-release</name>
			<url>https://olympus.esri.com/artifactory/plugins-release</url>
		</pluginRepository>
		<pluginRepository>
			<snapshots>
				<enabled>true</enabled>
			</snapshots>
			<id>daily</id>
			<name>plugins-snapshot</name>
			<url>https://olympus.esri.com/artifactory/plugins-snapshot</url>
		</pluginRepository>
	</pluginRepositories>
	<build>
		<directory>${project.basedir}/target</directory>
		<outputDirectory>${project.build.directory}/classes</outputDirectory>
		<finalName>${project.artifactId}-${project.version}</finalName>
		<sourceDirectory>${project.basedir}/src/main/java</sourceDirectory>
		<scriptSourceDirectory>src/main/scripts</scriptSourceDirectory>

		<resources>
			<resource>
				<directory>${project.basedir}/src/main/resources</directory>
			</resource>
		</resources>

		<pluginManagement>
			<!-- NOTE: These plugins will be removed from future versions of the super 
				POM -->
			<!-- They are kept for the moment as they are very unlikely to conflict 
				with lifecycle mappings (MNG-4453) -->
			<plugins>
				<plugin>
					<artifactId>maven-antrun-plugin</artifactId>
					<version>1.7</version>
				</plugin>
				<plugin>
					<artifactId>maven-assembly-plugin</artifactId>
					<version>2.2-beta-5</version>
				</plugin>
				<plugin>
					<artifactId>maven-dependency-plugin</artifactId>
					<version>2.1</version>
				</plugin>
				<plugin>
					<artifactId>maven-release-plugin</artifactId>
					<version>2.0</version>
				</plugin>
				<plugin>
					<groupId>org.apache.maven.plugins</groupId>
					<artifactId>maven-surefire-plugin</artifactId>
					<configuration>
						<testFailureIgnore>true</testFailureIgnore>
					</configuration>
				</plugin>

				<plugin>
					<artifactId>maven-compiler-plugin</artifactId>
					<version>${compiler.plugin.version}</version>
					<configuration>
						<source>${java.source.version}</source>
						<target>${java.target.version}</target>
					</configuration>
				</plugin>
				<plugin>
					<groupId>org.apache.maven.plugins</groupId>
					<artifactId>maven-source-plugin</artifactId>
					<version>${source.plugin.version}</version>
					<executions>
						<execution>
							<id>attach-sources</id>
							<goals>
								<goal>jar</goal>
							</goals>
						</execution>
					</executions>
				</plugin>
			</plugins>
		</pluginManagement>
		<plugins>
			<plugin>
				<artifactId>maven-antrun-plugin</artifactId>
				<version>${antrun.plugin.version}</version>
				<executions>
					<execution>
						<id>define-classpath</id>
						<phase>generate-resources</phase>
						<goals>
							<goal>run</goal>
						</goals>
						<configuration>
							<exportAntProperties>true</exportAntProperties>
							<target>
								<property name="maven.classpath"
									refid="maven.test.classpath" />
							</target>
						</configuration>
					</execution>
				</executions>
			</plugin>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-resources-plugin</artifactId>
				<version>${resources.plugin.version}</version>
				<executions>
					<execution>
						<id>copy-resourse-for-obfuscation</id>
						<goals>
							<goal>resources</goal>
						</goals>
						<configuration>
							<outputDirectory>${obfuscation.outputDirectory}</outputDirectory>
						</configuration>
					</execution>
				</executions>
			</plugin>
			<plugin>
				<groupId>com.google.code.maven-replacer-plugin</groupId>
				<artifactId>maven-replacer-plugin</artifactId>
				<version>${replacer.plugin.version}</version>
				<executions>
					<execution>
						<id>prepare-obfuscation-script</id>
						<goals>
							<goal>replace</goal>
						</goals>
						<phase>process-resources</phase>
						<configuration>
							<file>buildscripts/obfuscate.txt</file>
							<outputDir>target</outputDir>
							<preserveDir>false</preserveDir>
							<unescape>true</unescape>
							<regex>false</regex>
							<replacements>
								<replacement>
									<token>[OBFUSCATE_CLASSPATH]</token>
									<value>${maven.classpath}</value>
								</replacement>
								<replacement>
									<token>[OBFUSCATE_INPUT_JAR]</token>
									<value>${project.build.outputDirectory}/*</value>
								</replacement>
								<replacement>
									<token>[OBFUSCATE_OUTPUT_DIR]</token>
									<value>${obfuscation.outputDirectory}</value>
								</replacement>
							</replacements>
						</configuration>
					</execution>
				</executions>
			</plugin>
			<plugin>
				<artifactId>exec-maven-plugin</artifactId>
				<groupId>org.codehaus.mojo</groupId>
				<version>${exec.plugin.version}</version>
				<executions>
					<execution>
						<id>obfuscate-classes</id>
						<phase>prepare-package</phase>
						<goals>
							<goal>exec</goal>
						</goals>
						<configuration>
							<executable>java</executable>
							<arguments>
								<argument>-classpath</argument>
								<classpath />
								<argument>com.zelix.ZKM</argument>
								<argument>-l</argument>
								<argument>${project.artifactId}.log</argument>
								<argument>-tl</argument>
								<argument>${project.artifactId}.t.log</argument>
								<argument>target/obfuscate.txt</argument>
							</arguments>
						</configuration>
					</execution>
				</executions>
			</plugin>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-jar-plugin</artifactId>
				<version>${jar.plugin.version}</version>
				<executions>
					<execution>
						<id>obfuscated-jar</id>
						<goals>
							<goal>jar</goal>
						</goals>
						<phase>package</phase>
						<configuration>
							<classifier>obfuscated</classifier>
							<classesDirectory>${obfuscation.outputDirectory}</classesDirectory>
							<archive>
								<manifestFile>${basedir}/manifest</manifestFile>
							</archive>
						</configuration>
					</execution>
				</executions>
			</plugin>
		</plugins>
	</build>

	<profiles>
		<profile>
			<id>ags-release-local</id>
			<distributionManagement>
				<repository>
					<id>release</id>
					<name>ags-release-local</name>
					<url>https://olympus.esri.com/artifactory/ags-release-local</url>
				</repository>
			</distributionManagement>
		</profile>
		<profile>
			<id>olympus-real-time</id>
			<distributionManagement>
				<repository>
					<id>olympus-real-time</id>
					<name>olympus-real-time</name>
					<url>https://olympus.esri.com/artifactory/real-time</url>
				</repository>
			</distributionManagement>
		</profile>
		<profile>
			<id>a4iot</id>
			<activation>
				<property>
					<name>a4iot</name>
				</property>
			</activation>
			<properties>
				<jpe.sdk.version>10.9.1.0-SNAPSHOT</jpe.sdk.version>
			</properties>
		</profile>
		<profile>
			<id>java8-disable-doclint</id>
			<activation>
				<jdk>[1.8,)</jdk>
			</activation>
		</profile>
	</profiles>
</project>